

# Виральный видео поиск

Этот проект направлен на поиск виральных фрагментов в видео. Он использует машинное обучение для оценки транскрипции видео и выявления наиболее эмоциональных участков.

## Описание

Проект состоит из следующих компонентов:

* **Веб-приложение Flask**: предоставляет интерфейс для загрузки видео и отображения результатов поиска.
* **Модель машинного обучения**: оценивает транскрипцию видео и выявляет наиболее эмоциональные участки.
* **Скрипты обработки данных**: обрабатывают видео и транскрипцию для подготовки их к анализу.

## Как работает

1. Пользователь загружает видео через веб-приложение.
2. Видео обрабатывается скриптами обработки данных для подготовки его к анализу.
3. Модель машинного обучения оценивает транскрипцию видео и выявляет наиболее эмоциональные участки.
4. Результаты поиска отображаются в веб-приложении.

## Технологии

* **Python**: основной язык программирования проекта.
* **Flask**: веб-фреймворк для создания веб-приложения.
* **OpenCV**: библиотека для обработки видео.
* **PyTorch**: библиотека для машинного обучения.
* **Transformers**: библиотека для обработки естественного языка.

## Установка

1. Клонировать репозиторий.
2. Установить зависимости с помощью `pip install -r requirements.txt`.
3. Запустить веб-приложение с помощью `python src/run.py`.

## Сборка Docker-образа

Чтобы собрать Docker-образ для сервиса, выполните следующую команду в корневой директории проекта:

```bash
docker build -t viral_videos .
```

Эта команда создаст Docker-образ с установленными всеми необходимыми зависимостями.

## Запуск сервиса

После того как образ будет собран, вы можете запустить контейнер с поддержкой GPU и открыть порт 5000:

```bash
docker run --gpus all -p 5000:5000 viral_videos
```

```bash
docker run -p 5000:5000 viral_videos
```

Сервис будет доступен по адресу `http://localhost:5000`.

## Использование

После запуска сервиса вы можете отправлять запросы на анализ видео через API. Подробная информация о доступных эндпоинтах и их использовании приведена в документации к API.

## Использование

1. Загрузить видео через веб-приложение.
2. Просмотреть результаты поиска.

### Описание API

#### 1. Загрузка видео

**Метод:** `POST`
**Эндпоинт:** `/upload/video`
**Описание:** Загрузите видеофайл на сервер.

**Параметры:**

- `video` (file): Видео файл, который будет загружен.

**Ответ:**

- `200 OK`: При успешной загрузке видео.
- `400 Bad Request`: Если видео не было загружено или файл не выбран.

#### Пример запроса с использованием `curl`:

```bash
curl -X POST http://127.0.0.1:5000/upload/video -F 'video=@path/to/video.mp4'
```

---

#### 2. Получение статуса задачи

**Метод:** `GET`
**Эндпоинт:** `/video_status`
**Описание:** Получите статус выполнения задачи по идентификатору задачи.

**Параметры:**

- `task_id` (string): Идентификатор задачи.

**Ответ:**

- `200 OK`: Состояние задачи. Пример: `{"id": "task_id", "status": "SUCCESS"}`
- `404 Not Found`: Если задача не найдена.

#### Пример запроса:

```bash
curl -X GET 'http://127.0.0.1:5000/video_status?task_id=<task_id>'
```

---

#### 3. Получение результатов задачи

**Метод:** `GET`
**Эндпоинт:** `/video_result`
**Описание:** Получите результаты выполнения задачи по идентификатору задачи.

**Параметры:**

- `task_id` (string): Идентификатор задачи.

**Ответ:**
- `200 OK`: Результаты задачи.

- `404 Not Found`: Если задача не найдена.

#### Пример запроса:

```bash
curl -X GET 'http://127.0.0.1:5000/video_result?task_id=<task_id>'
```

---

## Вклад

Вклад в проект приветствуется. Пожалуйста, отправьте запросы на вытягивание или проблемы в репозиторий проекта.
